---
title: 绑定修型反求目标体解析
date: 2021-03-16 12:33:48
categories: 实操笔记
tags: 
  - maya
  - 绑定
---

<br>
<!--more-->

# 绑定修型反求目标体解析

我们知道，绑定中只靠蒙皮很难实现较好的变形效果，通常在蒙皮后会通过雕刻来修型。

是我们雕刻的模型是不能直接做bs的。bs的后链变形会覆盖蒙皮效果，所以bs基本都会使用前链变形（并行也可以实现，但是会增加额外的节点），而前链变形很难直接获得bs的目标体的

如下图，为了能够直观的看到雕刻后的形态我们的做法通常是在③形态下进行雕刻出④的形态，然后通过插件计算获得②的形态（maya2016之后bs编辑器中就可以实现这一操作了），再把②加到①上做bs驱动。

![image-20210318130439469](C:\Users\XingLian\AppData\Roaming\Typora\typora-user-images\image-20210318130439469.png)

今天主要说一下从④获取②的方法

1. 绑定修型变形顺序  点O → 变换A（BS） →  变换B（Skin）→ 点P

2. 由于bs的变形只有位移，所以变换A可以看做向量的相加，而蒙皮的变形是矩阵的乘法。

   我们将变换A的向量设为（a,b,c），变换B的矩阵设为T， 点O到点P的变换为向量（x,y,z）则

   

 `(a,b,c)· T = (x,y,z)`

   

   在3D数学中，线性变换会写成4*4的矩阵，相应的为了进行相乘，点或向量也会写成1*4或4*1的矩阵（x,y,z,0）,末尾的数字用来区分这个矩阵是点还是向量， 这里因为并不会涉及到矩阵的乘法省去了最后一个数字

   

3. 通过（a,b,c）拆解为三个方向上的单位向量可以将等式转化成下面的形态
   ```
     [a(1,0,0) + b(0,1,0) + c(0,0,1)] · T  
   = a(1,0,0) · T + b(0,1,0) · T + c(0,0,1) ·T  
   = (x,y,z) 
   ```

4. 我们通过移动蒙皮模型上的O点可以获得点O分别在x、y、z方向上移动一个单位后的位置，即(1,0,0)·T、(0,1,0)·T、(0,0,1)·T，我们分别将其设为（x1,y1,z1）、（x2,y2,z2）、（x3,y3,z3）

   那么等效替换后新的等式为
   ```
    a(x1, y1, z1)  + b(x2, y2, z2) + c (x3, y3, z3) =  (x,y,z)     
   ```

5. 拆分后可以获得一个三元一次方程组
```
    ax1+bx2+cx3 = x
    ay1+by2+cy3 = y
    az1+bz2+cz3 = z
```

然后剩下的就是解方程组了，鉴于排版问题，结果我就不写了，贴个链接吧

[https://www.cnblogs.com/tsingke/p/10671318.html](https://www.cnblogs.com/tsingke/p/10671318.html)


